<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SURVEYllance</title>

    <!--Import Google Icon Font-->
    <link href="src/MateriaIcons.css" rel="stylesheet"/>

    <!--Import materialize.css-->
    <link href="src/materialize/css/materialize.min.css" media="screen,projection" rel="stylesheet" type="text/css"/>

    <!-- Import Styles and Icons-->
    <link href="src/icons/baseline_class_black_18dp.ico" rel="shortcut icon" type="image/x-icon"/>
    <link href="src/style/nav_bubble.css" rel="stylesheet" type="text/css">
    <link href="src/style/creator_style.css" rel="stylesheet" type="text/css">

    <!-- Optimise for moblie devices -->
    <link href="src/manifest.json" rel="manifest">
    <meta content="yes" name="mobile-web-app-capable">
    <meta content="yes" name="apple-mobile-web-app-capable"/>
    <meta content="Klassenplaner" name="apple-mobile-web-app-_title">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">

    <link href="src/icons/baseline_class_black_48.png" rel="apple-touch-icon">
    <link href="src/icons/baseline_class_black_48.png" rel="icon" sizes="72x72" type="image/png">
    <link href="src/icons/baseline_class_black_36.png" rel="icon" sizes="54x54" type="image/png">
    <link href="src/icons/baseline_class_black_24.png" rel="icon" sizes="36x36" type="image/png">
    <link href="src/icons/baseline_class_black_18.png" rel="icon" sizes="27x27" type="image/png">

    <!--Let browser know website is optimized for mobile-->
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
</head>
<body>
<!-- Nav Head with _title-->
<nav>
    <div class="nav-wrapper">
        <div class="bubble-wrapper">
            <ul class="bg-bubbles">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
            </ul>
        </div>
        <a class="brand-logo center">Welcome to <b>SURVEY</b>llance!</a>
    </div>
</nav>

<!-- Content -->
<div>
    <!-- Popup for new surveys -->
    <div class="popup" id="newDialog" style="display: none">
        <div class="row">
            <div class="card">
            <div class="card-content">
                <form id="surveyForm">
                    <h4>Question:</h4>
                    <div class="row">
                        <div class="input-field col s12">
                            <input id="question" type="text" class="validate" required>
                            <label for="question" class="inline">Question</label>
                            <span class="helper-text" data-error="wrong" data-success="right">The question you want to ask</span>
                        </div>
                    </div>
                    <h4>answers:</h4>
                    <div class="row valign-wrapper answer animate">
                        <div class="input-field col s11">
                            <input id="answer1" type="text" class="validate" required>
                            <label for="answer1">Answer 1</label>
                        </div>
                        <i class="material-icons col s1 red-text" onclick="deleteAnswer(this)">delete_forever</i>
                    </div>
                    <div class="row valign-wrapper answer animate">
                        <div class="input-field col s11">
                            <input id="answer2" type="text" class="validate" required>
                            <label for="answer2">Answer 2</label>
                        </div>
                        <i class="material-icons col s1 red-text" onclick="deleteAnswer(this)">delete_forever</i>
                    </div>
                </form>
                <div class="row newAnswerBtn">
                    <a class="waves-effect waves-light btn" onclick="newAnswer()"><i class="material-icons">add</i></a>
                </div>
            </div>
            <div class="submitBtn card-action">
                <button type="submit" onclick="submitSurveyForm()" class="waves-effect waves-light btn white-text"> <!-- onclick="document.getElementsByTagName('form')[0].submit()" -->
                    Create Survey
                </button>
            </div>
            </div>
        </div>
    </div>
    <!-- Create survey -->
    <!--<editor-fold desc="New Survey Example Buttons">-->
    <div class="row">
        <div class="card hoverable newSurvey" onclick="document.getElementById('newDialog').style.display = 'flex'">
            <div class="card-content teal-text">
                <div class="card-_title">
                    <div class="valign-wrapper">
                        <i class="material-icons">add</i>
                        <p style="font-weight: bold">Create new Survey</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--
    <div class="row">
        <div class="card" onclick="location.href='new.html';">
            <div class="card-content">
                <div class="card-_title">
                    <div class="valign-wrapper">
                        <i class="material-icons" style="font-weight: bold; padding: 0px 5px;">poll</i>
                        <p style="font-weight: bold">Create new Survey</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <a class="btn-floating btn-large waves-effect waves-light right" style="margin: 5px;" onclick="location.href='new.html';"><i class="material-icons">add</i></a>
    </div>
    -->
    <!--</editor-fold>-->
    <!-- Divider "Recent Surveys" -->
    <div class="row">
        <div style="width: 100%; height: 20px; border-bottom: 1px solid black; text-align: center; border-color: gray; color: gray; margin-bottom: 20px;">
                        <span style="font-size: 25px; background-color: white; padding: 0 10px;">
                            Recent Surveys
                        </span>
        </div>
    </div>
    <!--List of already made surveys-->
    <!--<editor-fold desc="Demo Surveys">-->
    <div class="row" id="surveys">
        <div class="row survey">
            <div class="card hoverable">
                <div class="card-content" onclick="toggleCard(this)">
                    <div class="card-_title" style="padding-bottom: 5px;">
                        <div class="valign-wrapper">
                            <i class="material-icons">help_outline</i>
                            <p>What is love?</p>
                        </div>
                    </div>
                    <div class="surveyStatsNormal">
                        <div class="row">
                            <div class="col s4">
                                <p class="truncate">Baby don't hurt me</p>
                            </div>
                            <div class="progress col s7 offset-s1">
                                <div class="determinate" style="width: 70%"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col s4">
                                <p class="truncate">Don't hurt me</p>
                            </div>
                            <div class="progress col s7 offset-s1">
                                <div class="determinate" style="width: 20%"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col s4">
                                <p class="truncate">No more</p>
                            </div>
                            <div class="progress col s7 offset-s1">
                                <div class="determinate" style="width: 10%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="surveyStatsExtended hidden">
                        <div class="row">
                            <div class="col s3">
                                <p class="truncate">1: 70%</p>
                            </div>
                            <div class="progress col s9">
                                <div class="determinate" style="width: 70%"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col s3">
                                <p class="truncate">2: 20%</p>
                            </div>
                            <div class="progress col s9">
                                <div class="determinate" style="width: 20%"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col s3">
                                <p class="truncate">3: 10%</p>
                            </div>
                            <div class="progress col s9">
                                <div class="determinate" style="width: 10%"></div>
                            </div>
                        </div>
                        <p>1: Baby don't hurt me</p>
                        <p>2: Don't hurt me</p>
                        <p>3: No more</p>
                    </div>
                </div>
                <div class="card-action">
                    <a href="#">Close survey</a>
                    <a onclick="removeElement(this)">Remove survey</a>
                </div>
            </div>
        </div>
    </div>
    <div class="row" style="padding: 5px;">
        <a class="waves-effect waves-light btn" style="width: 100%; cursor: pointer; font-weight: bold" onclick="createDemoSurvey()">New Demo-Survey</a>
    </div>
    <!--</editor-fold>-->
    <!-- Divider "Questions" -->
    <div class="row">
        <div style="width: 100%; height: 20px; border-bottom: 1px solid black; text-align: center; border-color: gray; color: gray; margin-bottom: 20px;">
                    <span style="font-size: 25px; background-color: white; padding: 0 10px;">
                        Questions
                    </span>
        </div>
    </div>
    <!--List of upcoming questions-->
    <!--<editor-fold desc="Demo questions">-->
    <div class="row" id="questions">
        <div class="row">
            <div class="card">
                <div class="card-content">
                    <p>What is love?</p>
                </div>
                <div class="card-action">
                    <a onclick="removeElement(this)">Done</a>
                </div>
            </div>
        </div>
    </div>
    <div class="row" style="padding: 5px;">
        <a class="waves-effect waves-light btn" style="width: 100%; cursor: pointer; font-weight: bold" onclick="createDemoQuestion()">New Demo-Question</a>
    </div>
    <!--</editor-fold>-->
</div>

<!--<editor-fold desc="Libraries">-->
<script type="text/javascript" src="src/materialize/js/materialize.min.js"></script>
<script type="text/javascript" src="lib/signalr/signalr.js"></script>
<!--</editor-fold>-->
<!--<editor-fold desc="sharedObjects">-->
<script src="src/sharedObjects/SurveyAnswer.js" type="text/javascript"></script>
<script src="src/sharedObjects/Survey.js" type="text/javascript"></script>
<script src="src/sharedObjects/SurveyDOM.js"></script>
<script src="src/sharedObjects/Question.js" type="text/javascript"></script>
<script src="src/sharedObjects/QuestionDOM.js" type="text/javascript"></script>
<!--</editor-fold>-->
<script src="src/script/CreatorWebsocket.js"></script>
<script src="src/script/newSurveyPopup.js"></script>
<script type="text/javascript">

    function createDemoSurvey(){
        const randomNumber = () => {
            return Math.floor(Math.random() * 100);
        }
        let someAnswers = [];
        let someSurvey;
        let answer1, answer2, answer3;
        switch (Math.floor((Math.random() *3) +1)){
            case 1:
                answer1 = new SurveyAnswer('... give you up');
                answer1.votes = randomNumber();
                someAnswers.push(answer1);
                answer2 = new SurveyAnswer('... let you down');
                answer2.votes = randomNumber();
                someAnswers.push(answer2);
                answer3 = new SurveyAnswer('... run around');
                answer3.votes = randomNumber();
                someAnswers.push(answer3);

                someSurvey = new Survey('He will never...', someAnswers);
                break;
            case 2:
                answer1 = new SurveyAnswer('... can\'t');
                answer1.votes = randomNumber();
                someAnswers.push(answer1);
                answer2 = new SurveyAnswer('... scan');
                answer2.votes = randomNumber();
                someAnswers.push(answer2);
                answer3 = new SurveyAnswer('...  can');
                answer3.votes = randomNumber();
                someAnswers.push(answer3);

                someSurvey = new Survey('Yes we...', someAnswers);
                break;
            case 3:
                answer1 = new SurveyAnswer('... Dream');
                answer1.votes = randomNumber();
                someAnswers.push(answer1);
                answer2 = new SurveyAnswer('... Steam');
                answer2.votes = randomNumber();
                someAnswers.push(answer2);
                answer3 = new SurveyAnswer('...  Stream');
                answer3.votes = randomNumber();
                someAnswers.push(answer3);

                someSurvey = new Survey('I have a...', someAnswers);
                break;
        }
        let surveyDom = new SurveyDOM(someSurvey);
        document.getElementById('surveys').appendChild(surveyDom.domObject);
    }
    function createDemoQuestion(){
        let question;
        switch (Math.floor((Math.random() * 10) + 1)){
            case 1:
                question = new Question('Why does Donald Duck wear a towel when he comes out of the shower when he doesn’t usually wear any pants?')
                break;
            case 2:
                question = new Question('If corn oil is made from corn and vegetable oil is made from vegetables. What is baby oil made from?')
                break;
            case 3:
                question = new Question('Why is an electrical outlet called an outlet when you plug things into it? Shouldn’t it be called an inlet?')
                break;
            case 4:
                question = new Question('Why is an alarm clock going “off” when it actually turns on?')
                break;
            case 5:
                question = new Question('Why is lemon juice made with artificial flavor and dishwashing liquid made with real lemons?')
                break;
            case 6:
                question = new Question('Why is the man who invests all your money called a broker?')
                break;
            case 7:
                question = new Question('If quizzes are quizzical, what are tests?')
                break;
            case 8:
                question = new Question('If an ambulance is on its way to save someone, and it runs someone over, does it stop to help them?')
                break;
            case 9:
                question = new Question('Why is it that people say they “slept like a baby” when babies wake up like every two hours?')
                break;
            case 10:
                question = new Question('What do you call male ballerinas?')
                break;
        }
        let questionDom = new QuestionDOM(question)
        document.getElementById('questions').appendChild(questionDom.domObject);
    }
    createDemoSurvey();
    createDemoQuestion();


</script>
</body>
</html>